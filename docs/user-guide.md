# Fan 软件使用说明书

## 产品简介

Fan 是一款跨平台软件前端反编译提取工具，专为前端开发者和技术人员设计，能够从各种软件包中提取、解析和还原前端资源，帮助用户快速获取完整的前端代码和资源文件。

### 主要功能

- **跨平台支持**：兼容 Windows、macOS 和 Linux 操作系统
- **多种导入方式**：支持拖拽文件或通过文件选择对话框导入
- **自动解析**：智能识别和解析各种格式的软件包
- **资源还原**：提取并美化前端资源，包括 HTML、CSS、JavaScript、图片、字体等
- **完整输出**：生成可直接在浏览器中打开的前端包
- **权限管理**：内置权限检测和解决工具，避免权限问题
- **友好界面**：直观的图形化界面，操作简单易用

## 安装指南

### 系统要求

- **操作系统**：Windows 7+、macOS 10.13+、Linux（Ubuntu 18.04+、Fedora 30+ 等）
- **内存**：至少 2GB RAM
- **磁盘空间**：至少 100MB 可用空间
- **Node.js**：v14.0.0 或更高版本（仅开发环境需要）

### 安装方法

#### 方法一：使用预构建包

1. 从官方网站或 GitHub 发布页下载对应平台的安装包
2. 按照安装向导完成安装
3. 安装完成后，从开始菜单或应用程序文件夹启动 Fan

#### 方法二：从源码构建

1. 克隆项目仓库：`git clone <repository-url>`
2. 进入项目目录：`cd fan`
3. 安装依赖：`npm install`
4. 启动开发模式：`npm run dev`
5. 构建应用：`npm run build`

## 快速开始

### 基本操作流程

1. **启动应用**：打开 Fan 应用程序
2. **导入文件**：
   - **拖拽方式**：直接将软件包文件拖拽到应用界面的拖拽区域
   - **文件选择**：点击 "选择文件" 按钮，在弹出的对话框中选择软件包文件
3. **选择输出路径**（可选）：
   - 点击 "选择输出路径" 按钮，选择自定义输出目录
   - 或使用默认输出路径（下载文件夹/fan-output）
4. **安全扫描**：应用会自动对文件进行安全扫描，评估风险等级并显示安全建议
5. **权限申请**：如果需要，应用会显示权限使用说明并请求必要的权限
6. **备份提示**：应用会提示用户进行数据备份，并显示备份历史记录
7. **等待解析**：应用会自动解析文件，显示解析进度
8. **查看结果**：解析完成后，应用会显示解析结果，包括提取的文件数量和输出路径
9. **打开输出目录**：点击 "打开输出目录" 按钮，查看提取的前端资源

### 示例：提取 ZIP 文件中的前端资源

1. 启动 Fan 应用
2. 将包含前端资源的 ZIP 文件拖拽到应用界面
3. 应用开始解析文件，显示进度
4. 解析完成后，点击 "打开输出目录" 按钮
5. 在输出目录中查看提取的前端资源，包括 HTML、CSS、JS 文件等

## 高级功能

### 安全扫描功能

Fan 提供了内置的文件安全扫描功能，保护用户免受恶意文件的侵害：

1. **自动扫描**：当导入文件时，应用会自动对文件进行安全扫描
2. **扫描内容**：
   - 文件类型检查
   - 文件大小检查
   - 文件哈希计算
   - 文件内容安全性分析
   - 文件来源评估
3. **风险等级评估**：扫描完成后，应用会评估文件的风险等级（低、中、高）
4. **安全建议**：根据扫描结果，应用会提供相应的安全建议
5. **操作决策**：
   - 低风险：显示安全消息，允许继续操作
   - 中风险：显示警告消息，用户可选择继续或取消
   - 高风险：阻止操作，提示用户文件可能包含恶意代码

### 权限管理工具

当遇到文件系统权限问题时，可以使用内置的权限管理工具：

1. 点击 "检查权限" 按钮，打开权限管理工具
2. 在权限管理工具中：
   - **检测权限**：输入路径或使用默认路径，点击 "检测权限" 按钮
   - **使用推荐路径**：点击 "使用推荐路径" 按钮，使用应用推荐的安全路径
   - **应用修复**：点击 "应用修复" 按钮，自动修复权限问题
3. 查看权限检测结果和解决方案
4. 修复完成后，关闭权限管理工具，继续操作

### 权限使用说明

Fan 会在需要时显示详细的权限使用说明，帮助用户了解权限的用途和风险：

1. **权限类型**：
   - 读取权限：用于读取文件和目录内容
   - 写入权限：用于保存提取的资源和临时文件
   - 执行权限：用于执行必要的系统命令
2. **权限用途**：每个权限的具体用途和必要性
3. **风险等级**：每个权限的潜在风险等级
4. **使用方式**：权限的具体使用方式和范围

### 数据备份功能

Fan 提供了数据备份提示功能，确保用户数据安全：

1. **备份提示**：在执行文件提取操作前，应用会强制提示用户进行数据备份
2. **备份历史**：应用会显示最近的备份记录，帮助用户了解备份情况
3. **备份建议**：应用会提供备份建议，包括备份方法和存储位置
4. **操作选择**：用户可以选择已备份并继续，或取消操作
5. **备份记录**：应用会自动记录备份操作，形成备份历史

### 输出路径评估

Fan 会自动评估输出路径的性能和可靠性，提供最佳的存储建议：

1. **路径评估**：当选择输出路径时，应用会自动评估路径的性能和可靠性
2. **评估内容**：
   - 路径是否存在
   - 是否为网络驱动器
   - 是否为外部存储设备
3. **警告提示**：如果路径存在性能问题，应用会显示警告消息
4. **推荐路径**：应用会提供推荐的本地高速存储路径

### 使用场景检测

Fan 内置了使用场景检测功能，帮助用户避免潜在的侵权行为：

1. **自动检测**：当导入文件时，应用会自动检测使用场景
2. **检测内容**：
   - 文件类型分析
   - 文件大小评估
   - 文件路径中的敏感信息检测
3. **警告提示**：如果检测到潜在的侵权使用场景，应用会显示警告消息
4. **操作决策**：
   - 普通场景：允许继续操作
   - 潜在侵权场景：显示警告，用户可选择继续或取消
   - 明确侵权场景：阻止操作，提示用户操作可能违反法律法规

### 资源监控功能

Fan 内置了系统资源监控功能，确保应用运行稳定：

1. **资源检查**：在执行文件解析前，应用会检查系统资源是否足够
2. **监控内容**：
   - 内存使用情况
   - CPU 使用情况
   - 磁盘空间
3. **警报提示**：如果资源不足，应用会显示警报并建议关闭其他应用
4. **后台应用检测**：应用会检测并提示关闭非核心的资源密集型应用程序

### 自定义输出路径

1. 点击 "选择输出路径" 按钮
2. 在弹出的文件夹选择对话框中选择目标文件夹
3. 应用会更新当前输出路径显示
4. 开始解析后，前端资源会输出到所选路径

### 查看磁盘状态

在权限管理工具中，点击 "检测权限" 按钮后，应用会自动检测磁盘状态，包括：

- 总磁盘空间
- 已用空间
- 可用空间
- 磁盘使用率
- 只读状态

## 支持的文件格式

Fan 支持以下格式的软件包：

| 格式类别 | 扩展名 | 描述 |
|---------|-------|------|
| ZIP 类 | .zip, .asar | 标准 ZIP 压缩文件和 Electron ASAR 文件 |
| Electron | .exe, .dmg, .deb, .rpm | Electron 应用安装包 |
| Linux 包 | .deb, .rpm | Linux 系统下的软件包格式 |
| macOS 包 | .dmg | macOS 系统下的磁盘镜像文件 |
| 其他 | .7z, .rar | 其他压缩格式（部分支持） |

### 新功能：DMG 格式文件解包

Fan 现在支持 DMG 格式文件的解包功能，包括：

- **主流 DMG 文件结构解析**：支持解析常见的 DMG 文件结构
- **资源提取**：提取 DMG 文件中的前端资源
- **完整性验证**：验证提取的资源完整性

### 新功能：Linux 包格式解包

Fan 现在支持 Linux 系统下主流包格式的解包功能，包括：

- **.deb 格式**：Debian 及其衍生系统（如 Ubuntu）的包格式
- **.rpm 格式**：Red Hat 及其衍生系统（如 Fedora）的包格式
- **包元数据解析**：解析包的元数据信息
- **文件内容提取**：提取包中的前端资源

## 常见问题与解决方案

### 1. 权限不足错误

**错误信息**："权限不足，请以管理员身份运行或检查文件权限"

**原因**：目标文件或目录的权限设置不允许当前用户访问或修改

**解决方案**：
- 使用内置的权限管理工具检测和解决权限问题
- 以管理员/root 身份运行应用
- 选择其他具有写入权限的输出路径

### 2. 不支持的文件格式

**错误信息**："不支持的文件格式"

**原因**：文件格式不在支持列表中

**解决方案**：
- 检查文件格式是否在支持列表中
- 尝试将文件转换为支持的格式（如 ZIP）

### 3. 解包失败

**错误信息**："解包失败，可能是文件损坏或格式不兼容"

**原因**：文件损坏或格式不兼容

**解决方案**：
- 检查文件完整性
- 尝试使用其他解压工具打开文件
- 尝试其他文件

### 4. 磁盘空间不足

**错误信息**："磁盘空间不足，请清理磁盘后重试"

**原因**：目标磁盘空间不足

**解决方案**：
- 清理磁盘空间
- 选择其他磁盘作为输出路径

### 5. 解析速度慢

**原因**：文件过大或系统资源不足

**解决方案**：
- 关闭其他占用系统资源的应用
- 尝试解析较小的文件
- 增加系统内存

### 6. DMG 文件解包失败

**错误信息**："DMG文件解包仅在macOS平台上支持"

**原因**：DMG 文件解包功能仅在 macOS 平台上支持，在其他平台上无法使用

**解决方案**：
- 在 macOS 平台上使用该功能
- 尝试使用其他工具在非 macOS 平台上解包 DMG 文件

### 7. Linux 包解包失败

**错误信息**："DEB文件解包在当前平台上不支持" 或 "RPM文件解包在当前平台上不支持"

**原因**：Linux 包解包功能在某些平台上可能不支持，需要系统上安装相应的工具

**解决方案**：
- 确保系统上安装了相应的工具（如 ar、tar、rpm2cpio 等）
- 在 Linux 或 macOS 平台上使用该功能
- 尝试使用其他工具解包 Linux 包文件

## 性能优化建议

1. **使用 SSD**：SSD 可以显著提高文件读写速度，加快解析过程
2. **关闭不必要的应用**：释放系统资源，提高解析速度
3. **选择合适的输出路径**：避免使用网络驱动器或外部存储设备作为输出路径
4. **定期清理临时文件**：清理应用生成的临时文件，保持系统空间充足

## 安全注意事项

1. **合法使用**：仅用于合法合规的前端资源提取，禁止用于侵权、破解等非法行为
2. **文件安全**：在提取未知来源的文件时，注意检查文件安全性，避免提取恶意文件
3. **系统安全**：遵循操作系统的安全建议，不要随意修改系统权限
4. **数据备份**：在提取重要文件前，建议备份原始文件

## 故障排除

### 应用无法启动

- 检查系统是否满足要求
- 检查是否安装了必要的依赖
- 查看应用日志，了解具体错误

### 解析过程中崩溃

- 尝试解析较小的文件
- 检查系统内存是否充足
- 查看应用日志，了解具体错误

### 提取的文件不完整

- 检查原始文件是否完整
- 尝试使用其他解压工具验证文件完整性
- 检查输出路径是否有足够空间

## 联系与支持

### 反馈问题

如果在使用过程中遇到问题，可以：

1. 查看应用日志，了解具体错误
2. 检查常见问题与解决方案
3. 提交 GitHub Issue
4. 联系开发者

### 贡献代码

Fan 是一个开源项目，欢迎贡献代码：

1. Fork 项目仓库
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 免责声明与使用警告

**重要声明：请所有用户及开发者务必仔细阅读以下内容**

### 合法使用声明

本项目仅用于合法的学习、研究和开发目的。项目作者设计和开发本工具的初衷是为了帮助开发者学习前端技术、分析前端架构、以及在合法授权的情况下进行代码审查和安全测试。

### 禁止行为

**严格禁止**使用本项目进行以下活动：

- **盗用版权**：提取、修改和使用他人拥有版权的前端代码，未经授权用于商业或非商业用途
- **侵犯知识产权**：侵犯他人的专利、商标、商业秘密或其他知识产权
- **违反法律法规**：违反任何国家或地区的法律法规，包括但不限于计算机安全、知识产权保护、网络安全等相关法律
- **恶意破解**：用于破解、绕过付费墙、解锁限制内容等恶意行为
- **侵犯隐私**：提取、收集或滥用他人的个人信息或隐私数据
- **破坏系统**：用于破坏、干扰或攻击计算机系统、网络或服务

### 责任声明

任何个人或组织使用本项目进行违法违规活动，均与项目作者无关。项目作者不对任何因不当使用本项目而产生的法律责任、经济损失或其他后果承担责任。

### 使用前注意事项

在使用本工具前，请确保：

1. **获得授权**：如果提取的是他人的前端代码，请确保您已获得合法授权
2. **符合法律法规**：您的使用行为符合当地法律法规及道德规范
3. **尊重知识产权**：尊重他人的知识产权，不进行任何侵权行为
4. **风险自担**：了解并承担使用本工具可能带来的风险

### 开发者责任

如果您是本项目的开发者或贡献者：

1. **遵守开源协议**：确保您的贡献符合项目的开源协议
2. **维护项目初衷**：保持项目的合法用途，不添加任何用于非法活动的功能
3. **提醒用户**：在相关文档和界面中明确提醒用户合法使用本工具

### 法律后果

使用本工具进行违法活动可能导致严重的法律后果，包括但不限于：

- **民事责任**：被要求赔偿经济损失、停止侵权行为等
- **行政责任**：受到行政处罚，如罚款、没收违法所得等
- **刑事责任**：可能面临监禁、罚金等刑事处罚

### 最终解释权

本免责声明的最终解释权归项目作者所有。项目作者有权根据法律法规的变化和项目的发展，随时修改本免责声明的内容。

## 许可证

Fan 项目采用 MIT 许可证，详见 LICENSE 文件。

## 更新日志

### v1.2.0

- 新增文件安全扫描功能，包括文件类型检查、文件大小检查、文件哈希计算、文件内容安全性分析和文件来源评估
- 新增权限管理优化，包括权限级别评估、权限使用说明和权限申请策略优化
- 新增数据备份提示功能，包括备份历史记录管理和备份建议
- 新增输出路径评估功能，自动检测网络驱动器和外部存储设备，提供推荐的本地高速存储路径
- 新增使用场景检测功能，帮助用户避免潜在的侵权行为
- 新增智能内存缓存管理，包括LRU缓存淘汰策略和内存使用阈值监控
- 新增临时文件管理功能，包括自动清理过期临时文件和系统临时文件
- 新增资源监控功能，包括系统资源使用情况监控和后台应用程序检测
- 新增合规性检查功能，包括使用许可协议和使用场景检测
- 优化文件解析流程，包括并行处理提升重组速度和流式文件读写
- 优化错误处理和用户提示，提供更友好的错误信息和操作建议
- 更新开发文档，详细记录各模块功能、接口设计及使用方法
- 更新用户操作手册，包括新功能说明、使用步骤和常见问题解答

### v1.1.0

- 新增 DMG 格式文件的解包功能，支持主流 DMG 文件结构解析、资源提取及完整性验证
- 新增 Linux 系统下主流包格式（.deb、.rpm）的解包功能，支持包元数据解析和文件内容提取
- 优化大型文件处理方案，包括分块处理、内存占用控制和处理进度显示
- 提升文件解析算法性能，处理速度提升至少20%
- 添加资源占用监控机制，确保处理大型文件时系统资源使用合理
- 修复所有重复导入问题，建立统一的导入规范
- 对核心功能模块添加详细代码注释
- 重构现有代码结构，优化模块划分，提高代码复用性和可维护性
- 为所有核心功能模块编写单元测试，测试覆盖率达到80%以上
- 建立自动化测试流程，确保代码变更不会引入回归问题
- 更新开发文档，详细记录各模块功能、接口设计及使用方法
- 为所有公共API添加标准文档注释，符合行业规范
- 更新用户操作手册，包括新功能说明、使用步骤和常见问题解答

### v1.0.0

- 初始版本
- 支持基本的前端资源提取功能
- 实现跨平台适配
- 添加权限管理工具
- 优化用户界面
